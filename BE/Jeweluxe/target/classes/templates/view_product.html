<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{base::layout(~{::section})}"
>
  <head>
    <meta charset="ISO-8859-1" />
    <title>Insert title here</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <section>
      <div
        class="container card-sh"
        style="margin-top: 70px; margin-bottom: 100px"
      >
        <div class="col-md-12 p-5">
          <div class="row">
            <th:block th:if="${session.succMsg}">
              <p
                class="text-success alert alert-success text-center"
                role="alert"
              >
                [[${session.succMsg}]]
              </p>
              <th:block
                th:text="${@commnServiceImpl.removeSessionMessage()}"
              ></th:block>
            </th:block>

            <th:block th:if="${session.errorMsg}">
              <p class="text-danger text-center alert alert-danger">
                [[${session.errorMsg}]]
              </p>
              <th:block
                th:text="${@commnServiceImpl.removeSessionMessage()}"
              ></th:block>
            </th:block>

            <!-- Responsive layout -->
            <div class="col-md-6 text-center">
              <img
                alt=""
                th:src="@{'/img/product_img/'+${product.image}}"
                class="img-fluid"
                style="max-height: 250px; object-fit: contain"
              />
            </div>

            <div class="col-md-6">
              <p class="fs-3">[[${product.title}]]</p>

              <!-- Star Rating -->
              <div class="mb-2">
                <span class="text-warning">
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="far fa-star"></i>
                  <!-- Thay đổi sao rỗng dựa trên đánh giá -->
                </span>
                <span>(4.0)</span>
                <!-- Số điểm đánh giá -->
              </div>

              <p>
                <span class="fw-bold">Description:</span
                ><br />[[${product.description}]]
              </p>
              <p>
                <span class="fw-bold">Product Details:</span><br />
                Status:
                <th:block th:if="${product.stock > 0}">
                  <span class="badge bg-success">Available</span>
                </th:block>
                <th:block th:unless="${product.stock > 0}">
                  <span class="badge bg-warning">Out of Stock</span>
                </th:block>
                <br />Category: [[${product.category}]]<br />Policy: 7 Days
                Replacement & Return
              </p>
              <p class="fs-5 fw-bold">
                Price:
                [[${product.discountPrice}]] VND
                <span class="fs-6 text-decoration-line-through text-secondary"
                  >[[${product.price}]]</span
                >
                <span class="fs-6 text-success"
                  >[[${product.discount}]]% off</span
                >
              </p>

              <div class="row">
                <div class="col-md-4 text-success text-center p-2">
                  <i class="fas fa-money-bill-wave fa-2x"></i>
                  <p>Cash On Delivery</p>
                </div>
                <div class="col-md-4 text-danger text-center p-2">
                  <i class="fas fa-undo-alt fa-2x"></i>
                  <p>Return Available</p>
                </div>
                <div class="col-md-4 text-primary text-center p-2">
                  <i class="fas fa-truck-moving fa-2x"></i>
                  <p>Free Shipping</p>
                </div>
              </div>

              <th:block th:if="${product.stock > 0}">
                <th:block th:if="${user == null}">
                  <a href="/signin" class="btn btn-danger col-md-12"
                    >Add To Cart</a
                  >
                </th:block>

                <th:block th:unless="${user == null}">
                  <a
                    th:href="@{'/user/addCart?pid=' + ${product.id} + '&uid=' + ${user.id}}"
                    class="btn btn-danger col-md-12"
                    >Add To Cart</a
                  >
                </th:block>
              </th:block>

              <th:block th:unless="${product.stock > 0}">
                <a href="#" class="btn text-white btn-warning col-md-12"
                  >Out of Stock</a
                >
              </th:block>
            </div>
          </div>
        </div>
      </div>
    </section>
  </body>
</html>
