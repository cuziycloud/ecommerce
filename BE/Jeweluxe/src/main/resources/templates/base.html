<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  th:fragment="layout(content)">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Updated Title -->
	<title>Jeweluxe - Fine Jewelry</title>

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
		  rel="stylesheet"
		  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
		  crossorigin="anonymous">

	<!-- Font Awesome CSS -->
	<link rel="stylesheet"
		  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
		  integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
		  crossorigin="anonymous" referrerpolicy="no-referrer" />

	<style>
		body {
			padding-top: 55px; /* Adjust if navbar height changes */
		}
		.navbar-brand {
			font-weight: 600;
		}
		.dropdown-item i.fas, .dropdown-item i.far {
			width: 20px;
			text-align: center;
		}
		.nav-link .badge {
			font-size: 0.65em;
			padding: 0.3em 0.5em;
			vertical-align: top;
		}
		/* Footer */
		.footer-dark {
			background-color: #212529;
			color: rgba(255, 255, 255, 0.7);
		}
		.footer-dark h6 {
			color: #ffffff;
			margin-bottom: 1rem;
		}
		.footer-dark a {
			color: rgba(255, 255, 255, 0.7);
			text-decoration: none;
			transition: color 0.2s ease-in-out;
		}
		.footer-dark a:hover {
			color: #ffffff;
		}
		.footer-dark .social-icons a {
			display: inline-block;
			width: 36px;
			height: 36px;
			line-height: 36px;
			text-align: center;
			border-radius: 50%;
			background-color: rgba(255, 255, 255, 0.1);
			margin: 0 0.25rem;
			transition: background-color 0.2s ease, transform 0.2s ease;
		}
		.footer-dark .social-icons a:hover {
			background-color: var(--bs-primary); /* Consider changing primary color for jewelry */
			color: #ffffff;
			transform: scale(1.1);
		}
		.footer-dark .copyright-section {
			background-color: rgba(0, 0, 0, 0.2);
			padding: 1rem 0;
		}
	</style>

</head>
<body class="d-flex flex-column min-vh-100">

<header>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top shadow-sm">
		<div class="container-fluid px-4">
			<!-- Brand - Updated Icon -->
			<a class="navbar-brand fw-bold" th:href="@{/}">
				<i class="fa-regular fa-gem me-2"></i> Jeweluxe <!-- Changed icon to a gem -->
			</a>

			<!-- Toggler -->
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
					data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
					aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<!-- Navbar Collapse -->
			<div class="collapse navbar-collapse" id="navbarSupportedContent">

				<!-- Left Nav -->
				<ul class="navbar-nav me-auto mb-2 mb-lg-0 align-items-lg-center">
					<li class="nav-item px-2">
						<a class="nav-link" th:href="@{/}">
							<i class="fa-solid fa-house me-1"></i> Home
						</a>
					</li>
					<li class="nav-item px-2">
						<!-- Icon could be fa-store or fa-tag, but fa-box-open is generic enough -->
						<a class="nav-link" th:href="@{/products}">
							<i class="fa-solid fa-box-open me-1"></i> Collections <!-- Changed text slightly -->
						</a>
					</li>
					<li class="nav-item px-2" th:if="${user != null and user.role == 'ROLE_ADMIN'}">
						<a class="nav-link" th:href="@{/admin/}">
							<i class="fa-solid fa-user-shield me-1"></i> Admin
						</a>
					</li>
					<li class="nav-item px-2">
						<a class="nav-link" th:href="@{/about}">
							<i class="fa-solid fa-circle-info me-1"></i> About
						</a>
					</li>
					<li class="nav-item px-2">
						<a class="nav-link" th:href="@{/contact}">
							<i class="fa-solid fa-envelope me-1"></i> Contact
						</a>
					</li>
				</ul>

				<!-- Right Nav -->
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
					<th:block th:if="${user == null}">
						<li class="nav-item px-2">
							<a class="nav-link" th:href="@{/signin}">
								<i class="fa-solid fa-right-to-bracket me-1"></i> Login
							</a>
						</li>
						<li class="nav-item px-2">
							<a class="btn btn-outline-light btn-sm" th:href="@{/register}"> <!-- Changed button style -->
								Register
							</a>
						</li>
					</th:block>

					<th:block th:if="${user != null}">
						<li class="nav-item px-2" th:if="${user.role == 'ROLE_USER'}">
							<a class="nav-link position-relative" th:href="@{/user/cart}" aria-label="Cart">
								<i class="fa-solid fa-cart-shopping fs-5"></i>
								<span th:if="${countCart != null and countCart > 0}"
									  class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                  [[${countCart}]]
                </span>
							</a>
						</li>

						<li class="nav-item dropdown px-2">
							<a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button"
							   data-bs-toggle="dropdown" aria-expanded="false">
								<!-- Profile image logic remains the same -->
								<img th:if="${user.profileImage != null}" th:src="@{'/img/profile_img/' + ${user.profileImage}}" alt="Profile"
									 class="rounded-circle me-2" style="width: 28px; height: 28px; object-fit: cover;">
								<i th:if="${user.profileImage == null and user.profile_img == null}"
								   class="fa-solid fa-user-circle me-2 fs-4"></i>
								<span class="d-none d-lg-inline">[[${user.name}]]</span>
							</a>
							<ul class="dropdown-menu dropdown-menu-end">
								<li><h6 class="dropdown-header">Signed in as [[${user.name}]]</h6></li>
								<li><hr class="dropdown-divider"></li>
								<li th:if="${user.role == 'ROLE_USER'}"><a class="dropdown-item" th:href="@{/user/profile}"><i class="fas fa-user-edit me-2"></i> My Profile</a></li>
								<li th:if="${user.role == 'ROLE_ADMIN'}"><a class="dropdown-item" th:href="@{/admin/profile}"><i class="fas fa-user-shield me-2"></i> Admin Profile</a></li>
								<li th:if="${user.role == 'ROLE_USER'}"><a class="dropdown-item" th:href="@{/user/user-orders}"><i class="fas fa-receipt me-2"></i> My Orders</a></li>
								<li><hr class="dropdown-divider"></li>
								<li><a class="dropdown-item" th:href="@{/logout}"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
							</ul>
						</li>
					</th:block>


				</ul>
			</div>
		</div>
	</nav>
</header>

<main class="flex-grow-1 mb-5">
	<!-- Dynamic Content Area -->
	<div th:replace="${content}">
	</div>
</main>

<footer class="footer-dark pt-5 pb-4 mt-auto">
	<div class="container text-center text-md-start">
		<div class="row gy-4">
			<!-- Brand/About - Updated Icon and Text -->
			<div class="col-lg-4 col-md-6 mb-4 mb-md-0">
				<h6 class="text-uppercase fw-bold text-primary mb-4">
					<i class="fa-regular fa-gem me-2"></i> Jeweluxe <!-- Changed icon -->
				</h6>
				<p>
					<!-- Updated description for jewelry -->
					Discover exquisite collections of fine jewelry, crafted with passion and precision. Find timeless pieces to celebrate life's special moments.
				</p>
				<div class="mt-4 social-icons">
					<a href="#" class="text-white" aria-label="Facebook"><i class="fab fa-facebook-f fa-lg"></i></a>
					<a href="#" class="text-white" aria-label="Twitter"><i class="fab fa-twitter fa-lg"></i></a>
					<a href="#" class="text-white" aria-label="Instagram"><i class="fab fa-instagram fa-lg"></i></a>
					<a href="#" class="text-white" aria-label="Pinterest"><i class="fab fa-pinterest fa-lg"></i></a> <!-- Added Pinterest -->
				</div>
			</div>
			<!-- Quick Links -->
			<div class="col-lg-2 col-md-6 mb-4 mb-md-0">
				<h6 class="text-uppercase fw-bold mb-4">
					Quick Links
				</h6>
				<p><a th:href="@{/}" class="text-reset">Home</a></p>
				<p><a th:href="@{/products}" class="text-reset">Collections</a></p> <!-- Changed text -->
				<p><a th:href="@{/about}" class="text-reset">About Us</a></p>
				<p><a th:href="@{/contact}" class="text-reset">Contact</a></p>
			</div>
			<!-- Categories -->
			<div class="col-lg-2 col-md-6 mb-4 mb-md-0">
				<h6 class="text-uppercase fw-bold mb-4">
					Jewelry Types <!-- Changed heading -->
				</h6>
				<!-- This section remains dynamic based on passed categories -->
				<th:block th:if="${categories != null}">
					<p th:each="c : ${categories}"><a th:href="@{/products(category=${c.name})}" class="text-reset">[[${c.name}]]</a></p>
				</th:block>
				<!-- Optional: Add static links if categories aren't always passed -->
				<th:block th:if="${categories == null}">
					<p><a href="/products?category=Rings" class="text-reset">Rings</a></p>
					<p><a href="/products?category=Necklaces" class="text-reset">Necklaces</a></p>
					<p><a href="/products?category=Earrings" class="text-reset">Earrings</a></p>
				</th:block>
			</div>
			<!-- Customer Service -->
			<div class="col-lg-3 col-md-6 mb-4 mb-md-0">
				<h6 class="text-uppercase fw-bold mb-4">Customer Service</h6>
				<p>
					<a th:href="${user != null ? (user.role == 'ROLE_ADMIN' ? '/admin/profile' : '/user/profile') : '/signin'}"
					   class="text-reset">My Account</a>
				</p>
				<p th:if="${user == null or user.role == 'ROLE_USER'}">
					<a th:href="${user != null ? '/user/user-orders' : '/signin'}" class="text-reset">Order History</a>
				</p>
			</div>
		</div>
	</div>
	<!-- Copyright -->
	<div class="copyright-section text-center p-3 mt-4">
		Â© [[${#dates.format(#dates.createNow(), 'yyyy')}]] Copyright:
		<a class="text-reset fw-bold" href="/">Jeweluxe.com</a>
		<span class="mx-2">|</span>
		<a href="/privacy-policy" class="text-reset small">Privacy Policy</a>
		<span class="mx-2">|</span>
		<a href="/terms-of-service" class="text-reset small">Terms of Service</a>
	</div>
</footer>


<!-- Bootstrap & jQuery JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<!-- Include jQuery Validation if needed -->
<!-- <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script> -->
<!-- Custom JS if needed -->
<!-- <script type="text/javascript" th:src="@{/js/script.js}"></script> -->

</body>
</html>