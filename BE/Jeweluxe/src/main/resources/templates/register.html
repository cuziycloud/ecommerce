<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  th:replace="~{base_minimal::minimal_layout(~{::section})}">
<head>
	<meta charset="UTF-8">
	<title>Register - Jeweluxe</title>
</head>
<body>
<section class="register-container">
	<div class="register-card">
		<div class="card-header">
			<div class="brand-icon"><i class="fas fa-user-plus"></i></div>
			<p>Create Your Jeweluxe Account</p>
		</div>

		<div class="card-body">
			<div th:if="${session.succMsg}" class="alert alert-success d-flex align-items-center" role="alert">
				<i class="fas fa-check-circle me-2"></i>
				<div>[[${session.succMsg}]]</div>
				<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
			</div>
			<div th:if="${session.errorMsg}" class="alert alert-danger d-flex align-items-center" role="alert">
				<i class="fas fa-times-circle me-2"></i>
				<div>[[${session.errorMsg}]]</div>
				<th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
			</div>

			<!-- Form Register -->
			<form th:action="@{/saveUser}" method="post" enctype="multipart/form-data" id="userRegister" novalidate>
				<div class="row g-3 mb-3">
					<div class="col-md-6">
						<label for="regName" class="form-label">Full Name</label>
						<input type="text" class="form-control" id="regName" name="name" required>
					</div>
					<div class="col-md-6">
						<label for="regMobile" class="form-label">Mobile Number</label>
						<input type="text" class="form-control" id="regMobile" name="mobileNumber" pattern="[0-9]{10,11}" title="Enter 10 or 11 digit mobile number" required>
					</div>
				</div>

				<div class="mb-3">
					<label for="regEmail" class="form-label">Email Address</label>
					<input type="email" class="form-control" id="regEmail" name="email" placeholder="you@example.com" required>
				</div>

				<div class="row g-3 mb-3">
					<div class="col-md-8">
						<label for="regAddress" class="form-label">Street Address</label>
						<input type="text" class="form-control" id="regAddress" name="address" required>
					</div>
					<div class="col-md-4">
						<label for="regCity" class="form-label">City</label>
						<input type="text" class="form-control" id="regCity" name="city" required>
					</div>
				</div>

				<div class="row g-3 mb-3">
					<div class="col-md-6">
						<label for="regState" class="form-label">State/Province</label>
						<input type="text" class="form-control" id="regState" name="state" required>
					</div>
					<div class="col-md-6">
						<label for="regPincode" class="form-label">Pincode</label>
						<input type="text" class="form-control" id="regPincode" name="pincode" pattern="[0-9]{5,7}" title="Enter a valid pincode" required>
					</div>
				</div>

				<div class="row g-3 mb-3">
					<div class="col-md-6">
						<label for="regPassword" class="form-label">Password</label>
						<input type="password" class="form-control" id="regPassword" name="password" required>
					</div>
					<div class="col-md-6">
						<label for="regConfirmPassword" class="form-label">Confirm Password</label>
						<input type="password" class="form-control" id="regConfirmPassword" name="confirmpassword" required>
					</div>
				</div>

				<div class="mb-3">
					<label for="regProfileImage" class="form-label">Profile Image (Optional)</label>
					<input class="form-control form-control-sm" id="regProfileImage" name="img" type="file" accept="image/png, image/jpeg, image/jpg">
					<div class="form-text small">Upload a PNG, JPG, or JPEG image. Max size 2MB.</div>
				</div>

				<div class="d-grid mt-4">
					<button type="submit" class="btn btn-primary register-btn w-100">
						<i class="fas fa-user-check me-1"></i> Create Account
					</button>
				</div>
			</form>
		</div>

		<div class="card-footer">
			Already have an account? <a th:href="@{/signin}">Sign In</a>
		</div>
	</div>
</section>

<script>
	$(document).ready(function() {
		$("#userRegister").validate({
			rules: {
				name: "required",
				mobileNumber: {
					required: true,
					pattern: /^[0-9]{10,11}$/
				},
				email: {
					required: true,
					email: true
				},
				address: "required",
				city: "required",
				state: "required",
				pincode: {
					required: true,
					pattern: /^[0-9]{5,7}$/
				},
				password: {
					required: true,
					minlength: 6
				},
				confirmpassword: {
					required: true,
					equalTo: "#regPassword"
				},
				img: {
					accept: "image/jpeg, image/png, image/jpg"
				}
			},
			messages: {
				mobileNumber: {
					pattern: "Please enter a valid 10 or 11 digit mobile number."
				},
				pincode:{
					pattern: "Please enter a valid pincode (5-7 digits)."
				},
				password: {
					minlength: "Password must be at least 6 characters long."
				},
				confirmpassword: {
					equalTo: "Passwords do not match."
				},
				img: {
					accept: "Please upload a valid image file (JPG, JPEG, PNG)."
				}
			}
		});
	});
</script>

</body>
</html>